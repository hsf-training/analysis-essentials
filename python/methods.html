
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Methods Â· LHCb analysis essentials</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../css/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="scripting.html" />
    
    
    <link rel="prev" href="conditions.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="running.html">
            
                <a href="running.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="operators.html">
            
                <a href="operators.html">
            
                    
                    Objects and operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="numbers.html">
            
                <a href="numbers.html">
            
                    
                    Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="strings.html">
            
                <a href="strings.html">
            
                    
                    Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="lists.html">
            
                <a href="lists.html">
            
                    
                    Lists and looping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="dictionaries.html">
            
                <a href="dictionaries.html">
            
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="conditions.html">
            
                <a href="conditions.html">
            
                    
                    Conditions
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.1.8" data-path="methods.html">
            
                <a href="methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9" data-path="scripting.html">
            
                <a href="scripting.html">
            
                    
                    Scripting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.10" data-path="modules.html">
            
                <a href="modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.11" data-path="learning.html">
            
                <a href="learning.html">
            
                    
                    Learning more
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.12" data-path="first_histogram.html">
            
                <a href="first_histogram.html">
            
                    
                    Making your first histogram
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.13" data-path="further_reading.html">
            
                <a href="further_reading.html">
            
                    
                    Further reading
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../shell/">
            
                <a href="../shell/">
            
                    
                    Introducing the Shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../shell/02-filedir.html">
            
                <a href="../shell/02-filedir.html">
            
                    
                    Navigating Files and Directories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../shell/03-create.html">
            
                <a href="../shell/03-create.html">
            
                    
                    Working With Files and Directories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../shell/04-pipefilter.html">
            
                <a href="../shell/04-pipefilter.html">
            
                    
                    Pipes and Filters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../shell/05-loop.html">
            
                <a href="../shell/05-loop.html">
            
                    
                    Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../shell/06-script.html">
            
                <a href="../shell/06-script.html">
            
                    
                    Shell Scripts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../shell/07-find.html">
            
                <a href="../shell/07-find.html">
            
                    
                    Finding Things
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../shell-extras/">
            
                <a href="../shell-extras/">
            
                    
                    Shell extras
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../shell-extras/screen.html">
            
                <a href="../shell-extras/screen.html">
            
                    
                    Using screen to keep things running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../shell-extras/screen2.html">
            
                <a href="../shell-extras/screen2.html">
            
                    
                    Advanced screen topics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../shell-extras/persistent-screen.html">
            
                <a href="../shell-extras/persistent-screen.html">
            
                    
                    Persistent screen or tmux session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../shell-extras/shell2.html">
            
                <a href="../shell-extras/shell2.html">
            
                    
                    Advanced shell topics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../git/">
            
                <a href="../git/">
            
                    
                    Version control with Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../git/01-basics.html">
            
                <a href="../git/01-basics.html">
            
                    
                    Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../git/02-setup.html">
            
                <a href="../git/02-setup.html">
            
                    
                    Setting Up Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../git/03-create.html">
            
                <a href="../git/03-create.html">
            
                    
                    Creating a Repository
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="../git/04-changes.html">
            
                <a href="../git/04-changes.html">
            
                    
                    Tracking Changes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" data-path="../git/05-history.html">
            
                <a href="../git/05-history.html">
            
                    
                    Exploring History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.6" data-path="../git/06-ignore.html">
            
                <a href="../git/06-ignore.html">
            
                    
                    Ignoring Things
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.7" data-path="../git/07-gitlab.html">
            
                <a href="../git/07-gitlab.html">
            
                    
                    Remotes in CERN GitLab
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.8" data-path="../git/08-share.html">
            
                <a href="../git/08-share.html">
            
                    
                    Sharing a repository with others
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.9" data-path="../git/09-pullrequests.html">
            
                <a href="../git/09-pullrequests.html">
            
                    
                    Collaborating with Pull Requests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.10" data-path="../git/10-conflict.html">
            
                <a href="../git/10-conflict.html">
            
                    
                    Conflicts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.11" data-path="../git/11-ci.html">
            
                <a href="../git/11-ci.html">
            
                    
                    GitLab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.12" data-path="../git/12-open.html">
            
                <a href="../git/12-open.html">
            
                    
                    Open Science
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.13" data-path="../git/13-licensing.html">
            
                <a href="../git/13-licensing.html">
            
                    
                    Licensing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.14" data-path="../git/14-citation.html">
            
                <a href="../git/14-citation.html">
            
                    
                    Citation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <a target="_blank" href="ref://analysis-essentials.pdf">
            
                    
                    Download PDF
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Methods</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="methods">Methods</h1>
<p>Methods, also called functions, take some input and return some output. We have
already used lots of methods, like <code>dir</code>, <code>help</code>, and <code>len</code>, and in this lesson
we will start creating our own.</p>
<p>As we have seen, methods can do a lot of stuff with very little typing. Methods
are normally used to encapsulate small pieces of code that we want to reuse.</p>
<p>Let&#x2019;s rewrite <code>len</code> as an example.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">length</span><span class="hljs-params">(obj)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Return the number of elements in obj.
...
<span class="hljs-meta">... </span>    obj must be iterable.
<span class="hljs-meta">... </span>    &quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    i = <span class="hljs-number">0</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> obj:
<span class="hljs-meta">... </span>        i += <span class="hljs-number">1</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> i
<span class="hljs-meta">&gt;&gt;&gt; </span>length
&lt;function length at <span class="hljs-number">0x7f83b2bc56e0</span>&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>help(length)
Help on function length <span class="hljs-keyword">in</span> module __main__:

length(obj)
    Return the number of elements <span class="hljs-keyword">in</span> obj.

    obj must be iterable.
<span class="hljs-meta">&gt;&gt;&gt; </span>length(<span class="hljs-string">&apos;A b c!&apos;</span>)
<span class="hljs-number">6</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>length(range(<span class="hljs-number">5</span>))
<span class="hljs-number">5</span>
</code></pre>
<p>There&#x2019;s a lot going on here, so we will break it down line-by-line.</p>
<ol>
<li><code>def length(obj)</code>: methods are <em>defined</em> using <code>def</code>, followed by a space,
and then the name you want to give the method.<sup><a href="#fn_1" id="reffn_1">1</a></sup> Inside the parentheses
after the name, we list the inputs, or <em>arguments</em>, that we want our method
to accept.  In this case, we only need a single input: the thing we want to
compute the length of.  Finally, there&#x2019;s a colon at the end, just like with
a <code>for</code> or <code>if</code>, which means a <em>block</em> of code follows (which must be
indented).</li>
<li><code>&quot;&quot;&quot;Return the number of elements in obj.&quot;&quot;&quot;</code>: This is the <em>docstring</em>. It&#x2019;s
just a documentation string, defined literally with three double quotes so that we can
include linebreaks. By placing a string here, Python makes the string
available to use when we pass our function to <code>help</code>. Documenting your
functions is a very good idea! It makes it clear to others, and to
future-you, what the method is supposed to do.</li>
<li>The method block. This is the code that will run whenever you <em>call</em> your
method, like <code>length([1])</code>. The code in the block has access to the
arguments and to any variables defined <em>before</em> the method definition.<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">top_function</span><span class="hljs-params">()</span>:</span>
<span class="hljs-meta">... </span>   <span class="hljs-string">&quot;&quot;&quot;Do something silly.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>   print(x)
<span class="hljs-meta">... </span>   print(y)
...
<span class="hljs-meta">&gt;&gt;&gt; </span>y = <span class="hljs-number">2</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>top_function()
<span class="hljs-number">1</span>
Traceback (most recent call last):
File <span class="hljs-string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
File <span class="hljs-string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="hljs-number">3</span>, <span class="hljs-keyword">in</span> top_function
NameError: <span class="hljs-keyword">global</span> name <span class="hljs-string">&apos;y&apos;</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined
</code></pre>
In general, you should try to minimise the number of variables outside your
method that you use inside. It makes figuring out what the method does much
harder, as you have to look elsewhere in the code to find things out.</li>
<li><code>return i</code>: This defines the <em>output</em> of the method, the thing that you get
back when you call the method. You don&#x2019;t have to return anything, in which
case Python will implicitly make your function return <code>None</code>, or you can
return multiple things at once.<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">no_return</span><span class="hljs-params">()</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-number">1</span> + <span class="hljs-number">1</span>
...
<span class="hljs-meta">&gt;&gt;&gt; </span>no_return()
<span class="hljs-meta">&gt;&gt;&gt; </span>no_return() == <span class="hljs-keyword">None</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">such_output</span><span class="hljs-params">()</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;wow&apos;</span>, <span class="hljs-string">&apos;much clever&apos;</span>, <span class="hljs-number">213</span>
...
<span class="hljs-meta">&gt;&gt;&gt; </span>such_output()
(<span class="hljs-string">&apos;wow&apos;</span>, <span class="hljs-string">&apos;much clever&apos;</span>, <span class="hljs-number">213</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>a, b, c = such_output()
<span class="hljs-meta">&gt;&gt;&gt; </span>b
<span class="hljs-string">&apos;much clever&apos;</span>
</code></pre>
You can see that returning multiple things implicitly means returning a
tuple, so we can choose to assign one variable per value while calling the
method.</li>
</ol>
<blockquote id="fn_1">
<sup>1</sup>. Names are conventionally in lowercase, with underscores separating words.<a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#x21A9;</a>
</blockquote>
<p>Methods can be called in several ways.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span><span class="hljs-params">(x, y)</span>:</span>
<span class="hljs-meta">... </span>   <span class="hljs-string">&quot;&quot;&quot;Return the sum of x and y.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>   <span class="hljs-keyword">return</span> x + y
...
<span class="hljs-meta">&gt;&gt;&gt; </span>add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>add(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>add(<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>add(y=<span class="hljs-number">2</span>, x=<span class="hljs-number">1</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>add(y=<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
  File <span class="hljs-string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="hljs-number">1</span>
SyntaxError: non-keyword arg after keyword arg
<span class="hljs-meta">&gt;&gt;&gt; </span>add(y=<span class="hljs-number">2</span>, =<span class="hljs-number">1</span>)
  File <span class="hljs-string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="hljs-number">1</span>
    add(y=<span class="hljs-number">2</span>, =<span class="hljs-number">1</span>)
             ^
SyntaxError: invalid syntax
</code></pre>
<p>Specifying the argument&#x2019;s name explicitly when calling a method is nice because
it reminds you what the argument is supposed to do. It also means you don&#x2019;t
have to remember the order in which the arguments were defined, you can specify
<em>keyword arguments</em> in any order. You can even mix <em>positional arguments</em> with
keyword arguments, but any keyword arguments must come last.</p>
<p>Using keyword arguments is particularly useful for arguments which act as
on/off flags, because it&#x2019;s often not obvious what your <code>True</code> or <code>False</code> is
doing.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span><span class="hljs-params">(x, y, show)</span>:</span>
<span class="hljs-meta">... </span>   <span class="hljs-string">&quot;&quot;&quot;Return the sum of x and y.
...
<span class="hljs-meta">... </span>   Optionally print the result before returning it.
<span class="hljs-meta">... </span>   &quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>   <span class="hljs-keyword">if</span> show:
<span class="hljs-meta">... </span>       print(x + y)
<span class="hljs-meta">... </span>   <span class="hljs-keyword">return</span> x + y
...
<span class="hljs-meta">&gt;&gt;&gt; </span>_ = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-keyword">True</span>) <span class="hljs-comment"># Hmm, what is True doing again?</span>
<span class="hljs-number">3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>_ = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, show=<span class="hljs-keyword">True</span>) <span class="hljs-comment"># Aha! Much clearer</span>
</code></pre>
<p>Always having to specify that flag is annoying. It would be much nicer if
<code>show</code> had a <em>default value</em>, so that we don&#x2019;t <em>have</em> to provide a value when
calling the method, but can optionally override it.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span><span class="hljs-params">(x, y, show=False)</span>:</span>
<span class="hljs-meta">... </span>   <span class="hljs-string">&quot;&quot;&quot;Return the sum of x and y.
...
<span class="hljs-meta">... </span>   Optionally print the result before returning it.
<span class="hljs-meta">... </span>   &quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>   <span class="hljs-keyword">if</span> show:
<span class="hljs-meta">... </span>       print(x + y)
<span class="hljs-meta">... </span>   <span class="hljs-keyword">return</span> x + y
...
<span class="hljs-meta">&gt;&gt;&gt; </span>_ = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># No printing!</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>_ = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, show=<span class="hljs-keyword">True</span>)
<span class="hljs-number">3</span>
</code></pre>
<p>Perfect.</p>
<p>Of course, function arguments can be anything, even other functions!</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_method</span><span class="hljs-params">(method, x)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Call `method` with `x`.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> method(x)
...
<span class="hljs-meta">&gt;&gt;&gt; </span>run_method(len, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-number">3</span>
</code></pre>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(2387542006);" id="methods-returning-methods"><i class="fa fa-square-o"></i> Methods returning methods<span id="heading-2387542006"></span></h3></div><div class="panel-body" id="panel-2387542006"><p>What does this method do?</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_incrementor</span><span class="hljs-params">(increment)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span><span class="hljs-params">(var)</span>:</span>
<span class="hljs-meta">... </span>        <span class="hljs-keyword">return</span> var + increment
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> func
</code></pre>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(3439453415);" id="solutionclick-to-expand"><i class="fa fa-line-chart"></i> Solution<span id="heading-3439453415">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-3439453415"><p>It returns a function whose <code>increment</code> value has been filled by the argument
to <code>make_incrementor</code>. If we called <code>make_incrementor(3)</code>, then <code>increment</code> has
the value 3, and we can fill in the returned method in our heads.</p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span><span class="hljs-params">(var)</span>:</span>
    <span class="hljs-keyword">return</span> var + <span class="hljs-number">3</span>
</code></pre>
<p>So when we call <em>this</em> method, we&#x2019;ll get back what we put in, but plus 3.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>increment_one = make_incrementator(<span class="hljs-number">1</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>increment_two = make_incrementator(<span class="hljs-number">2</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">print</span> increment_one(<span class="hljs-number">42</span>), increment_two(<span class="hljs-number">42</span>)
<span class="hljs-number">43</span> <span class="hljs-number">44</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">print</span> make_incrementator(<span class="hljs-number">3</span>)(<span class="hljs-number">42</span>) <span class="hljs-comment"># Do it in one go!</span>
<span class="hljs-number">45</span>
</code></pre>
</div></div></div></div></p>
<p>What if you like to accept an arbitrary number of arguments? For example, we
can also write a <code>total</code> method that takes two arguments.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">total</span><span class="hljs-params">(x, y)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Return the sum of the arguments.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> x + y
...
&gt;&gt;&gt;
</code></pre>
<p>But what if we want to allow the caller to pass more than two arguments? It
would be tedious to define many arguments explicitly.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">total</span><span class="hljs-params">(*args)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Return the sum of the arguments.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    <span class="hljs-comment"># For seeing what `*` does</span>
<span class="hljs-meta">... </span>    print(<span class="hljs-string">&apos;Got {0} arguments: {1}&apos;</span>.format(len(args), args))
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> sum(args)
...
<span class="hljs-meta">&gt;&gt;&gt; </span>total(<span class="hljs-number">1</span>)
Got <span class="hljs-number">1</span> arguments: (<span class="hljs-number">1</span>,)
<span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>total(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
Got <span class="hljs-number">2</span> arguments: (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
<span class="hljs-number">3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>total(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
Got <span class="hljs-number">3</span> arguments: (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-number">6</span>
</code></pre>
<p>The <code>*args</code> syntax says &#x201C;stuff any arguments into a tuple and call it <code>args</code>&#x201D;.
This let&#x2019;s us capture any number of arguments. As <code>args</code> is a tuple, one could
loop over it, access a specific element, and so on.</p>
<p>We can also <em>expand</em> lists into separate arguments with the same syntax when
<em>calling</em> a method.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reverse_args</span><span class="hljs-params">(x, y)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> y, x
...
<span class="hljs-meta">&gt;&gt;&gt; </span>l = [<span class="hljs-string">&apos;a&apos;</span>, <span class="hljs-string">&apos;b&apos;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>reverse_args(l)
Traceback (most recent call last):
  File <span class="hljs-string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
TypeError: reverse_args() takes exactly <span class="hljs-number">2</span> arguments (<span class="hljs-number">1</span> given)
<span class="hljs-meta">&gt;&gt;&gt; </span>reverse_args(*l)
(<span class="hljs-string">&apos;b&apos;</span>, <span class="hljs-string">&apos;a&apos;</span>)
</code></pre>
<p>A similar syntax exists for keyword arguments.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ages</span><span class="hljs-params">(**people)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Print people&apos;s information.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    <span class="hljs-comment"># For seeing what `**` does</span>
<span class="hljs-meta">... </span>    print(<span class="hljs-string">&apos;Got {0} arguments: {1}&apos;</span>.format(len(people), people))
<span class="hljs-meta">... </span>    <span class="hljs-keyword">for</span> person <span class="hljs-keyword">in</span> people:
<span class="hljs-meta">... </span>        print(<span class="hljs-string">&apos;Person {0} is {1}&apos;</span>.format(person, people[person]))
...
<span class="hljs-meta">&gt;&gt;&gt; </span>ages(steve=<span class="hljs-number">31</span>)
Got <span class="hljs-number">1</span> arguments: {<span class="hljs-string">&apos;steve&apos;</span>: <span class="hljs-number">31</span>}
Person steve <span class="hljs-keyword">is</span> <span class="hljs-number">31</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>ages(steve=<span class="hljs-number">31</span>, helen=<span class="hljs-number">70</span>, zorblax=<span class="hljs-number">9963</span>)
Got <span class="hljs-number">3</span> arguments: {<span class="hljs-string">&apos;steve&apos;</span>: <span class="hljs-number">31</span>, <span class="hljs-string">&apos;zorblax&apos;</span>: <span class="hljs-number">9963</span>, <span class="hljs-string">&apos;helen&apos;</span>: <span class="hljs-number">70</span>}
Person steve <span class="hljs-keyword">is</span> <span class="hljs-number">31</span>
Person zorblax <span class="hljs-keyword">is</span> <span class="hljs-number">9963</span>
Person helen <span class="hljs-keyword">is</span> <span class="hljs-number">70</span>
</code></pre>
<p>As you can see from the debug print statement, <code>**people</code> is a dictionary
containing the keyword arguments we passed to the <code>ages</code> method. The keys of
the dictionary are the names of the argument as strings, and the values are the
values of the arguments. Just like for the <code>*</code> syntax, <code>**</code> can also be used to
expand a dictionary into keyword arguments.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>d = {<span class="hljs-string">&apos;thor&apos;</span>: <span class="hljs-number">5000</span>, <span class="hljs-string">&apos;yoda&apos;</span>: <span class="hljs-number">-1</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>ages(**d)
Got <span class="hljs-number">2</span> arguments: {<span class="hljs-string">&apos;yoda&apos;</span>: <span class="hljs-number">-1</span>, <span class="hljs-string">&apos;thor&apos;</span>: <span class="hljs-number">5000</span>}
Person yoda <span class="hljs-keyword">is</span> <span class="hljs-number">-1</span>
Person thor <span class="hljs-keyword">is</span> <span class="hljs-number">5000</span>
</code></pre>
<p>The order of the keyword arguments used to call the method are not necessarily
the same as those that the function block sees!
This is because dictionaries are unordered, and the <code>**</code> syntax effectively creates a dictionary.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(7140267320);" id="the-most-generic-method"><i class="fa fa-square-o"></i> The most generic method<span id="heading-7140267320"></span></h3></div><div class="panel-body" id="panel-7140267320"><p>The most generic method would take any number of positional arguments <em>and</em> any
number of keyword arguments. What would this method look like?</p>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(8587836609);" id="solutionclick-to-expand"><i class="fa fa-line-chart"></i> Solution<span id="heading-8587836609">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-8587836609"><p>It would use both <code>*</code> and <code>**</code> syntax in defining the arguments.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generic</span><span class="hljs-params">(*args, **kwargs)</span>:</span>
<span class="hljs-meta">... </span>    print(<span class="hljs-string">&apos;Got args: {0}&apos;</span>.format(args))
<span class="hljs-meta">... </span>    print(<span class="hljs-string">&apos;Got kwargs: {0}&apos;</span>.format(kwargs))
...
<span class="hljs-meta">&gt;&gt;&gt; </span>d = {<span class="hljs-string">&apos;bing&apos;</span>: <span class="hljs-string">&apos;baz&apos;</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>generic(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&apos;abc&apos;</span>, foo=<span class="hljs-string">&apos;bar&apos;</span>, **d)
Got args: (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&apos;abc&apos;</span>)
Got kwargs: {<span class="hljs-string">&apos;bing&apos;</span>: <span class="hljs-string">&apos;baz&apos;</span>, <span class="hljs-string">&apos;foo&apos;</span>: <span class="hljs-string">&apos;bar&apos;</span>}
</code></pre>
</div></div></div></div></p>
<h2 id="inline-methods">Inline methods</h2>
<p>Some methods take other methods as arguments, like the built-in <code>map</code> method.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>map(str, range(<span class="hljs-number">5</span>))
[<span class="hljs-string">&apos;0&apos;</span>, <span class="hljs-string">&apos;1&apos;</span>, <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-string">&apos;3&apos;</span>, <span class="hljs-string">&apos;4&apos;</span>]
</code></pre>
<p><code>map</code> takes a function and an iterable, and applies the function to each element in
the iterable. It returns a new list with the results. We can define and then pass
our own functions.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cube</span><span class="hljs-params">(x)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Return the third power of x.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> x*x*x
...
<span class="hljs-meta">&gt;&gt;&gt; </span>map(cube, range(<span class="hljs-number">5</span>))
[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">27</span>, <span class="hljs-number">64</span>]
</code></pre>
<p>For such a simple method, this is a lot of typing! We can use a <code>lambda</code> function to
define such simple methods inline.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>map(<span class="hljs-keyword">lambda</span> x: x*x*x, range(<span class="hljs-number">5</span>))
[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">27</span>, <span class="hljs-number">64</span>]
</code></pre>
<p>The syntax of defining a <code>lambda</code> is like this:</p>
<pre><code>lambda &lt;args&gt;: &lt;return expression&gt;
</code></pre><p><code>&lt;args&gt;</code> is a command-separate set of variables that the <code>lambda</code> can take as
arguments, and <code>&lt;return expression&gt;</code> is the code that is run. A <code>lambda</code>
automatically returns whatever the result of the expression is, you don&#x2019;t need
a <code>return</code> (the <code>return</code> is <em>implicit</em>).</p>
<p>Writing a <code>lambda</code> statement defines a method, which you can capture as a
variable just like any other object.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>div2 = <span class="hljs-keyword">lambda</span> x: x/<span class="hljs-number">2</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>div2
&lt;function &lt;<span class="hljs-keyword">lambda</span>&gt; at <span class="hljs-number">0x7fc6b2207758</span>&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>map(div2, range(<span class="hljs-number">5</span>))
[<span class="hljs-number">0.0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">2.0</span>]
</code></pre>
<p>Note that we got real numbers back because we are using Python 2 with <code>from __future__ import division</code>.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(771389961);" id="sum-in-quadrature"><i class="fa fa-square-o"></i> Sum in quadrature<span id="heading-771389961"></span></h3></div><div class="panel-body" id="panel-771389961"><p>Write a method that accepts an arbitrary number of arguments, and returns the
sum of the arguments computed in quadrature. A &#x201C;sum in quadrature&#x201D; is the
square root of the sum of the squares of each number. You should use <code>lambda</code>
to define a squaring and a square root function, and <code>map</code> to apply the
squaring method.</p>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(2624586734);" id="solutionclick-to-expand"><i class="fa fa-line-chart"></i> Solution<span id="heading-2624586734">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-2624586734"><p>We need a little square root method and a method to square its input.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>square = <span class="hljs-keyword">lambda</span> x: x*x
<span class="hljs-meta">&gt;&gt;&gt; </span>sqrt = <span class="hljs-keyword">lambda</span> x: x**<span class="hljs-number">0.5</span>
</code></pre>
<p>We then define a method that can accept any number of arguments using the
<code>*args</code> syntax, and use <code>map</code> to call the <code>square</code> method on the list of
arguments. Then we can call <code>sum</code> on the result, and then <code>sqrt</code>.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quadrature</span><span class="hljs-params">(*args)</span>:</span>
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;&quot;&quot;Return the sum in quadrature of the arguments.&quot;&quot;&quot;</span>
<span class="hljs-meta">... </span>    <span class="hljs-keyword">return</span> sqrt(sum(map(square, args)))
...
<span class="hljs-meta">&gt;&gt;&gt; </span>quadrature(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) <span class="hljs-comment"># should be equal to sqrt(2)</span>
<span class="hljs-number">1.4142135623730951</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">2</span>**<span class="hljs-number">0.5</span>
<span class="hljs-number">1.4142135623730951</span>
</code></pre>
</div></div></div></div></p>
<p>Another use case for <code>lambda</code> is the built-in <code>filter</code> method (see:
<code>help(filter)</code>).</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>filter(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, range(<span class="hljs-number">10</span>))   <span class="hljs-comment"># filter and return the even numbers only</span>
[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>]
</code></pre>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(3032175160);" id="list-comprehension"><i class="fa fa-square-o"></i> List comprehension<span id="heading-3032175160"></span></h3></div><div class="panel-body" id="panel-3032175160"><p>How would you rewrite the <code>filter</code> example above using a list comprehension?</p>
<div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(5719823362);" id="solutionclick-to-expand"><i class="fa fa-line-chart"></i> Solution<span id="heading-5719823362">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-5719823362"><pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>[ x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>) <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> ]
[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>]
</code></pre>
</div></div></div></div></p>
<p>Generally, you should only use <code>lambda</code> methods to define little throw-away
methods. The main downside with using them is that you can&#x2019;t attach a docstring
to them, and they become unwieldy when there&#x2019;s complex logic.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="conditions.html" class="navigation navigation-prev " aria-label="Previous page: Conditions">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="scripting.html" class="navigation navigation-next " aria-label="Next page: Scripting">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Methods","level":"2.1.8","depth":2,"next":{"title":"Scripting","level":"2.1.9","depth":2,"path":"python/scripting.md","ref":"python/scripting.md","articles":[]},"previous":{"title":"Conditions","level":"2.1.7","depth":2,"path":"python/conditions.md","ref":"python/conditions.md","articles":[]},"dir":"ltr"},"config":{"plugins":["katex","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#master","collapsible-menu","block-align","otherlink"],"styles":{"website":"css/website.css"},"pluginsConfig":{"collapsible-menu":{},"block-align":{},"search":{},"otherlink":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"LHCb analysis essentials","gitbook":"*","description":"Material for the first half of the LHCb Starterkit. Covers the basics of Git, Python, and the UNIX shell."},"file":{"path":"python/methods.md","mtime":"2018-11-26T12:26:23.701Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-26T12:29:31.553Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

