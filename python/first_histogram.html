<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Making your first histogram &mdash; Analysis essentials  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels.css" type="text/css" />
      <link rel="stylesheet" href="../_static/hsf.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/panels.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="More advanced topics in Python" href="further_reading.html" />
    <link rel="prev" title="Learning more" href="learning.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Analysis essentials
            <img src="../_static/hsf_logo_angled.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="README.html">An introduction to Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="running.html">Running Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="00scripts.html">Scripting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="00scripts.html#argparse">argparse</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="01basics.html">1: Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="01basics.html#Jupyter">Jupyter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#Basic-types-and-operations">Basic types and operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#strong-typing">strong typing</a></li>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#Container-types">Container types</a></li>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#Mutability">Mutability</a></li>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#dynamic-typing">dynamic typing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="01basics.html#Assignement-and-variables">Assignement and variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#Python-variable-assignement">Python variable assignement</a></li>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#Sugar:-comprehensions">Sugar: comprehensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="01basics.html#Sugar:-using-Markdown">Sugar: using Markdown</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="operators.html">Objects and operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="operators.html#objects">Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="numbers.html">Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings.html">Strings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="strings.html#formatting">Formatting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lists.html">Lists and looping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="lists.html#looping">Looping</a></li>
<li class="toctree-l3"><a class="reference internal" href="lists.html#list-comprehension">List comprehension</a></li>
<li class="toctree-l3"><a class="reference internal" href="lists.html#tuples">Tuples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dictionaries.html">Dictionaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dictionaries.html#dictionary-keys">Dictionary keys</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="conditions.html">Conditions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="conditions.html#truthiness">Truthiness</a></li>
<li class="toctree-l3"><a class="reference internal" href="conditions.html#conditions-in-loops">Conditions in loops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="methods.html#inline-methods">Inline methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html">Scripting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scripting.html#argparse">argparse</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modules.html#using-modules-into-your-code-import">Using modules into your code: import</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html#the-standard-library">The standard library</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html#modules-from-pypi">Modules from PyPi</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html#modules-inside-a-virtual-environment">Modules inside a virtual environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html#write-your-first-python-module">Write your first Python module</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html#write-a-structured-module">Write a structured module</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules.html#run-a-module">Run a module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="classes.html#Welcome-to-classes">Welcome to classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="classes.html#Inheritance:-a-glance">Inheritance: a glance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="classes.html#How-to-fix">How to fix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="learning.html">Learning more</a><ul>
<li class="toctree-l3"><a class="reference internal" href="learning.html#exploring-python">Exploring Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="learning.html#conventional-coding">Conventional coding</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Making your first histogram</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pandas">Pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-histograms">Plotting histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applying-cuts">Applying cuts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="further_reading.html">More advanced topics in Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="further_reading.html#nice-standard-libraries">Nice standard libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="further_reading.html#nice-libraries-for-data-analysis">Nice libraries for data analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="further_reading.html#python-and-root">Python and ROOT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-python/README.html">Advanced Python Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#pure-python-advanced">Pure Python, advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#data-loading-and-plotting">Data loading and plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#multivariate-analysis-and-machine-learning">Multivariate Analysis and Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#reweighting">Reweighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#statistical-inference">Statistical Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#splot-technique">sPlot technique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/README.html#scikit-hep">Scikit-HEP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/10Basics.html">1: Basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/10Basics.html#Basics">Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/10Basics.html#Markdown">Markdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/10Basics.html#Jupyter">Jupyter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/10Basics.html#Importing-modules">Importing modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/11AdvancedPython.html">Advanced Python Concepts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Packing-and-unpacking-of-values">Packing and unpacking of values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Context-manager">Context manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Using-a-class">Using a class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Decorators-and-factories">Decorators and factories</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Exceptions">Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Catching-exceptions">Catching exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/11AdvancedPython.html#Exceptions-as-control-flow">Exceptions as control-flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html">Advanced Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#Dunder">Dunder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#len">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#str">str</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#Callable">Callable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#Indexing-(iterating)">Indexing (iterating)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#self">self</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/12AdvancedClasses.html#Danger-zone">Danger zone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/20DataAndPlotting.html">2: First look at data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/20DataAndPlotting.html#Recap:-Importing-modules">Recap: Importing modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/20DataAndPlotting.html#Loading-data">Loading data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/20DataAndPlotting.html#Adding-variables">Adding variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/20DataAndPlotting.html#Comparing-distributions">Comparing distributions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/30Classification.html">3: Multivariate Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/30Classification.html#Using-a-classifier">Using a classifier</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/31ClassificationExtension.html">4: Extension on Classification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/31ClassificationExtension.html#Alternative-implimentations">Alternative implimentations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/31ClassificationExtension.html#Feature-engineering">Feature engineering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/31ClassificationExtension.html#k-folding"><span class="math notranslate nohighlight">\(k\)</span>-folding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/31ClassificationExtension.html#Turn-this-into-a-scipt-using-argparse">Turn this into a scipt using argparse</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/32BoostingToUniformity.html">5: Boosting to Uniformity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/32BoostingToUniformity.html#Loading-data">Loading data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html">6: Neural networks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html#Downloading-a-dataset">Downloading a dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html#Example-of-training-a-network">Example of training a network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html#Creating-your-own-neural-network">Creating your own neural network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html#Example-of-a-very-specific-neural-network">Example of a very specific neural network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html#Fitting-very-specific-expressions-as-estimators">Fitting very specific expressions as estimators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/33OLDDemoNeuralNetworks.html#Ensembling-of-neural-neworks">Ensembling of neural neworks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/40DemoReweighting.html">7: Demonstration of distribution reweighting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#Downloading-data">Downloading data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#prepare-train-and-test-samples">prepare train and test samples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#train-part-of-original-distribution">train part of original distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#test-part-for-target-distribution">test part for target distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#Bins-based-reweighting-in-n-dimensions">Bins-based reweighting in n dimensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#Gradient-Boosted-Reweighter">Gradient Boosted Reweighter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#GB-discrimination">GB-discrimination</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#How-to-tune">How to tune</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#Folding-reweighter">Folding reweighter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/40DemoReweighting.html#GB-discrimination-for-reweighting-rule">GB discrimination for reweighting rule</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/50LikelihoodInference.html">Likelihood inference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/50LikelihoodInference.html#Scope-of-this-tutorial">Scope of this tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/50LikelihoodInference.html#Getting-started">Getting started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/50LikelihoodInference.html#Difference-of-the-two-spaces">Difference of the two spaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/50LikelihoodInference.html#Plotting">Plotting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/50LikelihoodInference.html#Loss">Loss</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/60sPlot.html">8: sPlot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Simple-sPlot-example">Simple sPlot example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Observed-distributions">Observed distributions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Applying-sWeights">Applying sWeights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#More-complex-case">More complex case</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Splot">Splot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Alternative:-Known-probabilities">Alternative: Known probabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Fitting-doesn’t-give-us-information-about-real-labels">Fitting doesn’t give us information about real labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Appying-sPlot">Appying sPlot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Using-sWeights-to-reconstruct-initial-distribution">Using sWeights to reconstruct initial distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#An-important-requirement-of-sPlot">An important requirement of sPlot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Derivation-of-sWeights-(optional)">Derivation of sWeights (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/60sPlot.html#Conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/70ScikitHEPUniverse.html">Scikit-HEP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/70ScikitHEPUniverse.html#formulate---converting-expressions">formulate - converting expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/70ScikitHEPUniverse.html#Particle">Particle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/70ScikitHEPUniverse.html#hepunits">hepunits</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell/README.html">Introducing the Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#the-command-line-interface">The Command-Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#the-shell">The Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#why-bother">Why bother?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#nelle-s-pipeline-starting-point">Nelle’s Pipeline: Starting Point</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell/02-filedir.html">Navigating Files and Directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../shell/02-filedir.html#nelle-s-pipeline-organizing-files">Nelle’s Pipeline: Organizing Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../shell/03-create.html">Working With Files and Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/04-pipefilter.html">Pipes and Filters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../shell/04-pipefilter.html#nelle-s-pipeline-checking-files">Nelle’s Pipeline: Checking Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../shell/05-loop.html">Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/06-script.html">Shell Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/07-find.html">Finding Things</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell-extras/README.html">UNIX shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/screen.html">Using screen to keep things running</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/screen2.html">Advanced screen topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/screen2.html#finding-lost-screens">Finding lost screens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/screen2.html#using-tabs-in-screen">Using tabs in screen</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/persistent-screen.html">Persistent screen or tmux session on lxplus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/persistent-screen.html#setting-up-password-less-kerberos-token">Setting up password-less kerberos token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/persistent-screen.html#making-use-of-the-keytab">Making use of the keytab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/persistent-screen.html#using-k5reauth-to-automatically-refresh-your-kerberos-token">Using k5reauth to automatically refresh your kerberos token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/shell2.html">More about the UNIX shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#types-of-shell">Types of shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#manual-pages">Manual pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#environment-variables">Environment variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#differences-among-files">Differences among files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#looping-over-files">Looping over files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#conditionals">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#linking-commands">Linking commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#pipes-and-redirection">Pipes and redirection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#bash-security">Bash security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#complexity">Complexity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#text-viewers">Text viewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#text-editors">Text editors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#disk-space">Disk space</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#over-the-wire-and-bandit-wargame">Over the Wire and Bandit wargame</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../snakemake/README.html">Analysis automation with Snakemake</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../snakemake/README.html#documentation-and-environments">Documentation and environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../snakemake/README.html#workflow-preservation">Workflow preservation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../snakemake/README.html#basic-tutorial">Basic Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#what-is-a-workflow">What is a workflow?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#why-use-a-workflow-management-system">Why use a workflow management system?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#re-running-rules">Re-running rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#chaining-rules">Chaining rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#the-limits-of-wildcards">The limits of wildcards</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../snakemake/README.html#advanced-tutorial">Advanced Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#running-scripts">Running scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#log-files">Log files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#config-files">Config files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snakemake/README.html#includes">Includes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../git/README.html">Git</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/01-basics.html">Automated Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/02-setup.html">Setting Up Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/03-create.html">Creating a Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/04-changes.html">Tracking Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/05-history.html">Exploring History</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/06-ignore.html">Ignoring Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/07-gitlab.html">Remotes in CERN GitLab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/08-share.html">Sharing a repository with others</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/09-pullrequests.html">Collaborating with Pull Requests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#what-is-a-pull-or-merge-request">What is a Pull (or Merge) Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#fork-the-original-project-repository">Fork the original project repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#clone-a-remote-project-and-its-fork">Clone a remote project and its fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#sync-your-local-repository-with-remote-changes">Sync your local repository with remote changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#implement-your-new-feature">Implement your new feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#push-changes">Push changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#create-a-pull-or-merge-request">Create a Pull (or Merge) Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#discussing-amending-retiring-a-merge-request">Discussing, amending, retiring a Merge Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#accepting-a-pull-request">Accepting a Pull Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#the-social-side-of-coding">The social side of coding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#automatic-testing">Automatic testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../git/10-conflict.html">Conflicts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/11-ci.html">GitLab CI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/12-open.html">Open Science</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/13-licensing.html">Licensing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/14-citation.html">Citation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#contributing-notebooks">Contributing notebooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../CONDUCT.html">Contributor Code of Conduct</a></li>
<li class="toctree-l3"><a class="reference internal" href="../LICENSE.html">Instructional Material</a></li>
<li class="toctree-l3"><a class="reference internal" href="../LICENSE.html#software">Software</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Analysis essentials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="README.html">An introduction to Python</a> &raquo;</li>
      <li>Making your first histogram</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/hsf-training/analysis-essentials/blob/master/python/first_histogram.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="making-your-first-histogram">
<h1>Making your first histogram<a class="headerlink" href="#making-your-first-histogram" title="Permalink to this headline"></a></h1>
<p>In this section we are going to make our first plots using Python. For this we
will use some public LHCb data for <span class="math notranslate nohighlight">\( B^+ \rightarrow H^+ H^+ H^-  \)</span> from the
<a class="reference external" href="http://opendata.cern.ch/?ln=en">CERN open data portal</a>. This data is available
on EOS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ eos root://eospublic.cern.ch/ ls /eos/opendata/lhcb/AntimatterMatters2017/data
B2HHH_MagnetDown.root
B2HHH_MagnetUp.root
PhaseSpaceSimulation.root
</pre></div>
</div>
<div class="panel panel-callout docutils container">
<div class="panel-header open docutils container">
<p id="installing-python-packages-inside-a-virtual-environment"><i class="fa fa-info-circle"></i> Installing python packages inside a virtual environment</p>
</div>
<div class="panel-body docutils container">
<p>It is however usually preferable and safer to do everything inside a virtual environement.
The latter is like a copy of your current environement. Thus you can modify your virtual
environement (including installing/deleting/updating modules) without affecting your default
environement. If at some point you realize you have broken everything, you can always exit
the virtual environement and go back to the default lxplus one.</p>
<p>To enter a suitable environment you can use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lb-conda default bash
</pre></div>
</div>
<p>You can then install stuff with <code class="docutils literal notranslate"><span class="pre">pip</span></code>. In this lesson we will be using
<a class="reference external" href="https://github.com/scikit-hep/root_pandas"><code class="docutils literal notranslate"><span class="pre">root_pandas</span></code></a>, which can
be installed using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install --upgrade root_pandas matplotlib
python -c <span class="s1">&#39;import pandas; print(f&quot;Got pandas from {pandas.__file__}&quot;)&#39;</span>
python -c <span class="s1">&#39;import root_pandas; print(f&quot;Got root_pandas from {root_pandas.__file__}&quot;)&#39;</span>
python -c <span class="s1">&#39;import matplotlib; print(f&quot;Got matplotlib from {matplotlib.__file__}&quot;)&#39;</span>
</pre></div>
</div>
<p>You can go back to the default environement using the <code class="docutils literal notranslate"><span class="pre">deactivate</span></code> command.</p>
</div>
</div>
<div class="panel panel-callout docutils container">
<div class="panel-header open docutils container">
<p id="installing-python-packages-directly-(not-the-recommended-way)"><i class="fa fa-info-circle"></i> Installing python packages directly (not the recommended way)</p>
</div>
<div class="panel-body docutils container">
<p>Even if not recommended, you can also install modules directly, without using a virtual environment.
While LCG provides a lot of useful packages, there are sometimes things missing.
Fortunately, most packages can be easily installed into <code class="docutils literal notranslate"><span class="pre">~/.local/</span></code> using <code class="docutils literal notranslate"><span class="pre">pip</span></code>
with the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag. In this lesson we will be using
<a class="reference external" href="https://github.com/scikit-hep/root_pandas"><code class="docutils literal notranslate"><span class="pre">root_pandas</span></code></a>, which can
be installed using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install --user root_pandas
</pre></div>
</div>
<p>Some packages, such as <a class="reference external" href="http://flake8.pycqa.org/">flake8</a>, provide executables
which are useful to have included on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> so they are available without
specifying their absolute path. This can be done by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="k">$(</span>python -m site --user-base<span class="k">)</span>/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
<p>see the bash lesson for more details about the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable.</p>
<p>We can even upgrade already installed packages using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install --user matplotlib --upgrade
</pre></div>
</div>
<p>As LCG uses <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> to make packages available, any packages it provides
have higher priority than the user installed packages. In order to make it so
that a package installed with <code class="docutils literal notranslate"><span class="pre">--user</span></code> takes precedence, you must run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span><span class="k">$(</span>python -m site --user-site<span class="k">)</span>:<span class="nv">$PYTHONPATH</span>
</pre></div>
</div>
<p>every time you run the <code class="docutils literal notranslate"><span class="pre">source</span></code> command above. This is <strong>only</strong> needed when
installing user packages to upgrade LCG provided ones.</p>
</div>
</div>
<p>All ROOT methods made available in Python using a set of automatically generated
bindings, known as <a class="reference external" href="https://root.cern.ch/pyroot">PyROOT</a>.
These are all available by using <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ROOT</span></code>.
For example if we want to create a <code class="docutils literal notranslate"><span class="pre">TFile</span></code> using the aforementioned data we can
launch <code class="docutils literal notranslate"><span class="pre">ipython</span></code> and run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">ROOT</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;root://eospublic.cern.ch//eos/opendata/lhcb/AntimatterMatters2017/data/B2HHH_MagnetDown.root&#39;</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">my_file</span> <span class="o">=</span> <span class="n">ROOT</span><span class="o">.</span><span class="n">TFile</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">my_file</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>TNetXNGFile**       root://eospublic.cern.ch//eos/opendata/lhcb/AntimatterMatters2017/data/B2HHH_MagnetDown.root
 TNetXNGFile*       root://eospublic.cern.ch//eos/opendata/lhcb/AntimatterMatters2017/data/B2HHH_MagnetDown.root
  KEY: TTree    DecayTree;1 Tree continaing data for B- --&gt; h-h+h- decays
In [5]: my_tree = my_file.Get(&#39;DecayTree&#39;)
In [6]: my_tree.Print()
******************************************************************************
*Tree    :DecayTree : Tree continaing data for B- --&gt; h-h+h- decays          *
*Entries :  5135823 : Total =       945201357 bytes  File  Size =  666480138 *
*        :          : Tree compression factor =   1.42                       *
******************************************************************************
</pre></div>
</div>
<p>While it is very useful to be able to access all the ROOT functionality in this
way, they are often slow and tedious to use. Luckily people have built more
specialised bindings to allow ROOT to be used in a more pythonic way.</p>
<section id="pandas">
<h2>Pandas<a class="headerlink" href="#pandas" title="Permalink to this headline"></a></h2>
<p><a class="reference external" href="https://pandas.pydata.org/"><code class="docutils literal notranslate"><span class="pre">pandas</span></code></a> is a library for doing data analysis on
tabular data, using a data structure known as dataframes. These typically have
columns with labels (like <code class="docutils literal notranslate"><span class="pre">TLeaf</span></code>s in a <code class="docutils literal notranslate"><span class="pre">TTree</span></code>) with many rows. The
<code class="docutils literal notranslate"><span class="pre">root_pandas</span></code> package we installed earlier can be used to create a pandas
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> from a root file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">root_pandas</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">df</span> <span class="o">=</span> <span class="n">root_pandas</span><span class="o">.</span><span class="n">read_root</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&#39;DecayTree&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can then use <code class="docutils literal notranslate"><span class="pre">df.head(5)</span></code> to see the first 5 rows of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span>
   <span class="n">B_FlightDistance</span>  <span class="n">B_VertexChi2</span>        <span class="n">H1_PX</span>        <span class="n">H1_PY</span>          <span class="n">H1_PZ</span>  \
<span class="mi">0</span>         <span class="mf">25.301004</span>      <span class="mf">1.497280</span>   <span class="mf">375.284205</span>   <span class="mf">831.308481</span>   <span class="mf">51820.233718</span>
<span class="mi">1</span>         <span class="mf">94.690700</span>      <span class="mf">1.383338</span> <span class="o">-</span><span class="mf">4985.130785</span>  <span class="mf">5853.750057</span>  <span class="mf">326157.454706</span>
<span class="mi">2</span>          <span class="mf">8.284490</span>      <span class="mf">5.187101</span> <span class="o">-</span><span class="mf">1265.456544</span>  <span class="mf">2330.050788</span>   <span class="mf">90762.658032</span>
<span class="mi">3</span>          <span class="mf">5.590769</span>      <span class="mf">7.129099</span>  <span class="o">-</span><span class="mf">720.797259</span>  <span class="mf">3413.790588</span>   <span class="mf">86793.058768</span>
<span class="mi">4</span>          <span class="mf">3.013242</span>     <span class="mf">10.988701</span>   <span class="mf">397.754571</span>  <span class="mf">1791.373059</span>   <span class="mf">40040.364159</span>
</pre></div>
</div>
<p>While it is nice to be able to view the data, it is typically much more useful to
be able to apply operations to it in bulk. In this example we have the momentum
components for each of the child particles in the decay (<code class="docutils literal notranslate"><span class="pre">H1</span></code>, <code class="docutils literal notranslate"><span class="pre">H2</span></code> and <code class="docutils literal notranslate"><span class="pre">H3</span></code>)
but not the transverse momentum. We can however apply expressions to each row
of the data like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;sqrt(H2_PX**2 + H2_PY**2)&#39;</span><span class="p">)</span>
<span class="n">Out</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="mi">0</span>          <span class="mf">1306.642724</span>
<span class="mi">1</span>           <span class="mf">167.578904</span>
<span class="mi">2</span>          <span class="mf">1273.457019</span>
<span class="mi">3</span>          <span class="mf">1146.299204</span>
             <span class="o">...</span>
<span class="mi">5135820</span>     <span class="mf">210.430531</span>
<span class="mi">5135821</span>     <span class="mf">762.344570</span>
<span class="mi">5135822</span>    <span class="mf">1454.471057</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</pre></div>
</div>
<p>This gives us the transverse momentum for each particle as an array, however, we
can also create a new column with this information by assigning to the name we
want to create and doing the action “inplace”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;H2_PT = sqrt(H2_PX**2 + H2_PY**2)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="panel panel-challenge docutils container">
<div class="panel-header open docutils container">
<p id="adding-the-total-b+-meson-momentum"><i class="fa fa-square-o"></i> Adding the total B+ meson momentum</p>
</div>
<div class="panel-body docutils container">
<p>Create a new column in the dataframe called <code class="docutils literal notranslate"><span class="pre">B_P</span></code> for the total momentum of the
B+ meson.</p>
<div class="panel panel-solution docutils container">
<div class="panel-header docutils container">
<p id="solution"><i class="fa fa-check-square-o"></i> Solution</p>
</div>
<div class="panel-body docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s1">&#39;B_P = sqrt(&#39;</span>
        <span class="s1">&#39;(H1_PX + H2_PX + H3_PX)**2 + &#39;</span>
        <span class="s1">&#39;(H1_PY + H2_PY + H3_PY)**2 + &#39;</span>
        <span class="s1">&#39;(H1_PZ + H2_PZ + H3_PZ)**2&#39;</span>
        <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="plotting-histograms">
<h2>Plotting histograms<a class="headerlink" href="#plotting-histograms" title="Permalink to this headline"></a></h2>
<p>Now that we have the momentum of the <span class="math notranslate nohighlight">\( B+ \)</span> meson, it would be useful to plot
its distribution in a histogram. We could use ROOT for this but the most popular Python library for
plotting is known as <a class="reference external" href="https://matplotlib.org/"><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a> and this is what we
will use here. The most common way <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> is used is with the <code class="docutils literal notranslate"><span class="pre">pyplot</span></code>
interface imported as <code class="docutils literal notranslate"><span class="pre">plt</span></code> like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">]:</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;Agg&#39;</span><span class="p">)</span>  <span class="c1"># Force matplotlib to not use any Xwindows backend.</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;B_FlightDistance&#39;</span><span class="p">])</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;B_flight_distance.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="B flight distance" src="../_images/B_flight_distance.png" /></p>
<div class="panel panel-callout docutils container">
<div class="panel-header open docutils container">
<p id="interactive-plotting"><i class="fa fa-info-circle"></i> Interactive plotting</p>
</div>
<div class="panel-body docutils container">
<p>There are various ways of viewing plots interactively such as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">plt.show()</span></code> Opens a window with the current plot and pauses the Python
interpreter until the window is closed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plt.ion()</span></code> Allows plots to be viewed without pausing the Python interpreter</p></li>
<li><p><a class="reference external" href="https://jupyter.org/"><code class="docutils literal notranslate"><span class="pre">jupyter</span></code></a> A web based interface for running various
languages including python in “notebooks”. If you’ve used <code class="docutils literal notranslate"><span class="pre">mathematica</span></code> or
<code class="docutils literal notranslate"><span class="pre">matlab</span></code> before it’s a similar interface with code, documentation and plots
all shown together.</p></li>
</ul>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">19</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;B_FlightDistance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">20</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;B_flight_distance_v2.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="B flight distance (v2)" src="../_images/B_flight_distance_v2.png" /></p>
<p>That’s not right! The new histogram has been plotted on top of our first one!</p>
<p>This is normally useful as it allows us to layer plots on top of each other to
compare them. Though in this case we don’t want to do that so we should first close
the previous plot before making our histogram. We should also add axis labels
and a legend like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">21</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># Close the previous plot</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">22</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;B_FlightDistance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;My data label&#39;</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">bins</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">24</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Flight distance of $B^+$ meson&#39;</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">25</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">26</span><span class="p">]:</span> <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;B_flight_distance_v3.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="B flight distance (v3)" src="../_images/B_flight_distance_v3.png" /></p>
</section>
<section id="applying-cuts">
<h2>Applying cuts<a class="headerlink" href="#applying-cuts" title="Permalink to this headline"></a></h2>
<p>When analysing data it is often useful to “throw away” some data in order to in
order change the contributions of a sample. Most commonly this is to remove some
background(s) so we can more precisely study a process of interest. This is
known as cutting.</p>
<p>In pandas we can apply a cut to a DataFrame using the <code class="docutils literal notranslate"><span class="pre">query</span></code> method. For
example to make a new DataFrame containing <span class="math notranslate nohighlight">\( B^+ \)</span> mesons with flight distances
of more than 15 mm we can use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">27</span><span class="p">]:</span> <span class="n">df_with_cut</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;B_FlightDistance &gt; 15&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="panel panel-challenge docutils container">
<div class="panel-header open docutils container">
<p id="comparing-momentum-distributions"><i class="fa fa-square-o"></i> Comparing momentum distributions</p>
</div>
<div class="panel-body docutils container">
<p>It is often useful to compare the effect of a cut on the distribution of another
variable. Try to plot a histogram showing the B+ lifetime distribution with and
without a total B+ momentum cut of 100000 MeV.</p>
<div class="panel panel-solution docutils container">
<div class="panel-header docutils container">
<p id="solution"><i class="fa fa-check-square-o"></i> Solution</p>
</div>
<div class="panel-body docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">df_with_cut</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;B_P &gt; 100000&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;B_FlightDistance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Without cut&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_with_cut</span><span class="p">[</span><span class="s1">&#39;B_FlightDistance&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;With 100 GeV momentum cut&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">bins</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Total momentum of $B^+$ meson&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;B_flight_distance_with_cut_compare.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we also use the <code class="docutils literal notranslate"><span class="pre">normed=True</span></code> option with <code class="docutils literal notranslate"><span class="pre">plt.hist</span></code>, this plots the
normalised distribution. This is typically more useful when comparing
distributions as it make it easier to see differences in the shape without the
independently of the total number of events.</p>
<p><img alt="B flight distance (v3)" src="../_images/B_flight_distance_with_cut_compare.png" /></p>
</div>
</div>
</div>
</div>
<div class="panel panel-challenge docutils container">
<div class="panel-header open docutils container">
<p id="comparing-momentum-distributions"><i class="fa fa-square-o"></i> Comparing momentum distributions</p>
</div>
<div class="panel-body docutils container">
<p>Calculate and plot the B+ meson mass assuming that all three of the child
hadrons are kaons.</p>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="learning.html" class="btn btn-neutral float-left" title="Learning more" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="further_reading.html" class="btn btn-neutral float-right" title="More advanced topics in Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright HSF [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/legalcode) - Originally based on [swcarpentry](https://github.com/swcarpentry/) © 2016–2017 Software Carpentry Foundation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    Hello world


</body>
</html>