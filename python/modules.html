

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Modules &mdash; Analysis essentials  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/panels.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/panels.css" type="text/css" />
  <link rel="stylesheet" href="../_static/hsf.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Learning more" href="learning.html" />
    <link rel="prev" title="Scripting" href="scripting.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Analysis essentials
          

          
            
            <img src="../_static/hsf_logo_angled.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="README.html">An introduction to Python</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="README.html#aim-of-these-lessons">Aim of these lessons</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="running.html">Running Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="operators.html">Objects and operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="operators.html#objects">Objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="numbers.html">Numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="strings.html">Strings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="strings.html#formatting">Formatting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lists.html">Lists and looping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="lists.html#looping">Looping</a></li>
<li class="toctree-l4"><a class="reference internal" href="lists.html#list-comprehension">List comprehension</a></li>
<li class="toctree-l4"><a class="reference internal" href="lists.html#tuples">Tuples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dictionaries.html">Dictionaries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="dictionaries.html#dictionary-keys">Dictionary keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="conditions.html">Conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="conditions.html#truthiness">Truthiness</a></li>
<li class="toctree-l4"><a class="reference internal" href="conditions.html#conditions-in-loops">Conditions in loops</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="methods.html">Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="methods.html#inline-methods">Inline methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="scripting.html">Scripting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="scripting.html#argparse">argparse</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-modules-into-your-code-import">Using modules into your code: import</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-standard-library">The standard library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modules-from-pypi">Modules from PyPi</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modules-inside-a-virtual-environment">Modules inside a virtual environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#write-your-first-python-module">Write your first Python module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#write-a-structured-module">Write a structured module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run-a-module">Run a module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="learning.html">Learning more</a><ul>
<li class="toctree-l4"><a class="reference internal" href="learning.html#exploring-python">Exploring Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="learning.html#conventional-coding">Conventional coding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="first_histogram.html">Making your first histogram</a><ul>
<li class="toctree-l4"><a class="reference internal" href="first_histogram.html#pandas">Pandas</a></li>
<li class="toctree-l4"><a class="reference internal" href="first_histogram.html#plotting-histograms">Plotting histograms</a></li>
<li class="toctree-l4"><a class="reference internal" href="first_histogram.html#applying-cuts">Applying cuts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="further_reading.html">More advanced topics in Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="further_reading.html#nice-standard-libraries">Nice standard libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="further_reading.html#nice-libraries-for-data-analysis">Nice libraries for data analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="further_reading.html#python-and-root">Python and ROOT</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-python/README.html">Advanced Python Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/1Basics.html">1: Basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/1Basics.html#Basics">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/1Basics.html#Markdown">Markdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/1Basics.html#Jupyter">Jupyter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/1Basics.html#Importing-modules">Importing modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html">2: First look at data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#Recap:-Importing-modules">Recap: Importing modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#5.-The-toy-dataset">5. The toy dataset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#Loading-data">Loading data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#6.-Plotting-a-histogram-with-matplotlib">6. Plotting a histogram with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#Adding-variables">Adding variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#Using-rectangular-cuts">Using rectangular cuts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/2DataAndPlotting.html#Comparing-distributions">Comparing distributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/3Classification.html">3: Multivariate Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/3Classification.html#Using-a-classifier">Using a classifier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/3Classification.html#TODO-Add-a-diagram-of-a-decision-tree-for-the-above-plot">TODO Add a diagram of a decision tree for the above plot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/4Extension.html">4: Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/4Extension.html#Alternative-implimentations">Alternative implimentations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/4Extension.html#Feature-engineering">Feature engineering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/4Extension.html#k-folding"><span class="math notranslate nohighlight">\(k\)</span>-folding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/4Extension.html#Turn-this-into-a-scipt-using-argparse">Turn this into a scipt using argparse</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html">5: Boosting to Uniformity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html#Loading-data">Loading data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html#Distributions-in-the-Dalitz-features-for-signal-and-background">Distributions in the Dalitz features for signal and background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html#Preparation-of-train/test-datasets">Preparation of train/test datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html#Setting-up-classifiers,-training">Setting up classifiers, training</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html#Let’s-look-at-the-results-of-training">Let’s look at the results of training</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/5BoostingToUniformity.html#ROC-curves-after-training">ROC curves after training</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html">6: Neural networks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Downloading-a-dataset">Downloading a dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Example-of-training-a-network">Example of training a network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Creating-your-own-neural-network">Creating your own neural network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Example-of-a-very-specific-neural-network">Example of a very specific neural network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Fitting-very-specific-expressions-as-estimators">Fitting very specific expressions as estimators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Writing-custom-pretransformer">Writing custom pretransformer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/6DemoNeuralNetworks.html#Ensembling-of-neural-neworks">Ensembling of neural neworks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/7DemoReweighting.html">7: Demonstration of distribution reweighting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#Downloading-data">Downloading data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#prepare-train-and-test-samples">prepare train and test samples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#Original-distributions">Original distributions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#train-part-of-original-distribution">train part of original distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#test-part-for-target-distribution">test part for target distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#Bins-based-reweighting-in-n-dimensions">Bins-based reweighting in n dimensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#Gradient-Boosted-Reweighter">Gradient Boosted Reweighter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#Comparing-some-simple-expressions:">Comparing some simple expressions:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#GB-discrimination">GB-discrimination</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#Folding-reweighter">Folding reweighter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/7DemoReweighting.html#GB-discrimination-for-reweighting-rule">GB discrimination for reweighting rule</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-python/8sPlot.html">8: sPlot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Simple-sPlot-example">Simple sPlot example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Observed-distributions">Observed distributions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Applying-sWeights">Applying sWeights</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/8sPlot.html#Compare">Compare</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#More-complex-case">More complex case</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Building-sPlot-over-mass">Building sPlot over mass</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/8sPlot.html#Of-course-we-don’t-have-labels-which-events-are-signal-and-which-are-background-beforehand">Of course we don’t have labels which events are signal and which are background beforehand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/8sPlot.html#We-have-no-information-about-real-labels">We have no information about real labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Fitting-doesn’t-give-us-information-about-real-labels">Fitting doesn’t give us information about real labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Appying-sPlot">Appying sPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Using-sWeights-to-reconstruct-initial-distribution">Using sWeights to reconstruct initial distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#An-important-requirement-of-sPlot">An important requirement of sPlot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Derivation-of-sWeights-(optional)">Derivation of sWeights (optional)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/8sPlot.html#Under-assumption-of-linearity:">Under assumption of linearity:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/8sPlot.html#Minimization-of-variation">Minimization of variation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../advanced-python/8sPlot.html#Uncorrelatedness">Uncorrelatedness</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-python/8sPlot.html#Conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell/README.html">Introducing the Shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#the-command-line-interface">The Command-Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#the-shell">The Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#why-bother">Why bother?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/README.html#nelle-s-pipeline-starting-point">Nelle’s Pipeline: Starting Point</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell/02-filedir.html">Navigating Files and Directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../shell/02-filedir.html#nelle-s-pipeline-organizing-files">Nelle’s Pipeline: Organizing Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../shell/03-create.html">Working With Files and Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/04-pipefilter.html">Pipes and Filters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../shell/04-pipefilter.html#nelle-s-pipeline-checking-files">Nelle’s Pipeline: Checking Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../shell/05-loop.html">Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/06-script.html">Shell Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/07-find.html">Finding Things</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell-extras/README.html">UNIX shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/screen.html">Using screen to keep things running</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/screen2.html">Advanced screen topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/screen2.html#finding-lost-screens">Finding lost screens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/screen2.html#using-tabs-in-screen">Using tabs in screen</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/persistent-screen.html">Persistent screen or tmux session on lxplus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/persistent-screen.html#setting-up-password-less-kerberos-token">Setting up password-less kerberos token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/persistent-screen.html#making-use-of-the-keytab">Making use of the keytab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/persistent-screen.html#using-k5reauth-to-automatically-refresh-your-kerberos-token">Using k5reauth to automatically refresh your kerberos token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shell-extras/shell2.html">More about the UNIX shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#types-of-shell">Types of shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#manual-pages">Manual pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#environment-variables">Environment variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../shell-extras/shell2.html#let-s-now-try-the-following-callout">Let’s now try the following: {.callout}</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#differences-among-files">Differences among files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#looping-over-files">Looping over files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#conditionals">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#linking-commands">Linking commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#pipes-and-redirection">Pipes and redirection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#bash-security">Bash security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#complexity">Complexity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#text-viewers">Text viewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#text-editors">Text editors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#disk-space">Disk space</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell-extras/shell2.html#over-the-wire-and-bandit-wargame">Over the Wire and Bandit wargame</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../git/README.html">Git</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/01-basics.html">Automated Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/02-setup.html">Setting Up Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/03-create.html">Creating a Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/04-changes.html">Tracking Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/05-history.html">Exploring History</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/06-ignore.html">Ignoring Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/07-gitlab.html">Remotes in CERN GitLab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/08-share.html">Sharing a repository with others</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/09-pullrequests.html">Collaborating with Pull Requests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#what-is-a-pull-or-merge-request">What is a Pull (or Merge) Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#fork-the-original-project-repository">Fork the original project repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#clone-a-remote-project-and-its-fork">Clone a remote project and its fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#sync-your-local-repository-with-remote-changes">Sync your local repository with remote changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#implement-your-new-feature">Implement your new feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#push-changes">Push changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#create-a-pull-or-merge-request">Create a Pull (or Merge) Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#discussing-amending-retiring-a-merge-request">Discussing, amending, retiring a Merge Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#accepting-a-pull-request">Accepting a Pull Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#the-social-side-of-coding">The social side of coding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../git/09-pullrequests.html#automatic-testing">Automatic testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../git/10-conflict.html">Conflicts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/11-ci.html">GitLab CI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/12-open.html">Open Science</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/13-licensing.html">Licensing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/14-citation.html">Citation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#contributing-notebooks">Contributing notebooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../CONDUCT.html">Contributor Code of Conduct</a></li>
<li class="toctree-l3"><a class="reference internal" href="../LICENSE.html">Instructional Material</a></li>
<li class="toctree-l3"><a class="reference internal" href="../LICENSE.html#software">Software</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Analysis essentials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="README.html">An introduction to Python</a> &raquo;</li>
        
      <li>Modules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/hsf-training/analysis-essentials/blob/master/python/modules.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>Python comes with lots of useful stuff, which is provided with modules
(and submodules, see later).
We have already met the maths module, but did not talk about how we started using it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span>
<span class="go">&lt;module &#39;math&#39; from &#39;/usr/lib/python2.7/lib-dynload/math.so&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">3.141592653589793</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">0.8414709848078965</span>
</pre></div>
</div>
<p>The path after <code class="docutils literal notranslate"><span class="pre">from</span></code> might look different on your computer.</p>
<p>So, <code class="docutils literal notranslate"><span class="pre">math</span></code> is a <em>module</em>, and this seems to behave a lot like other objects we
have met: it is a container with properties and methods attached that we can
access with the dot operator <code class="docutils literal notranslate"><span class="pre">.</span></code>. Actually, that is pretty much all there is to
them.</p>
<div class="section" id="using-modules-into-your-code-import">
<h2>Using modules into your code: import<a class="headerlink" href="#using-modules-into-your-code-import" title="Permalink to this headline">¶</a></h2>
<p>The keyword <code class="docutils literal notranslate"><span class="pre">import</span></code>, usually specified at the beginning of your source code, is
used to tell Python what modules you want to make available to your current
code.</p>
<p>There are different ways of specifying an import. The one we have seen already
simply makes the module available to you:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">0.5877109428927353</span>
</pre></div>
</div>
<p>The module <code class="docutils literal notranslate"><span class="pre">random</span></code> contains functions useful for random number generation: with
the <code class="docutils literal notranslate"><span class="pre">import</span></code> above, we have made the <code class="docutils literal notranslate"><span class="pre">random</span></code> module accessible, and everything
within that module is accessible via the syntax <code class="docutils literal notranslate"><span class="pre">random.&lt;name&gt;</span></code>. For the record,
the <code class="docutils literal notranslate"><span class="pre">uniform(x,y)</span></code> method returns a pseudo-random number within the range
<span class="math notranslate nohighlight">\( [x,y] \)</span>.</p>
<p>Sometimes you want to make only one or more things from a given module
accessible: Python gives you the ability to import just those:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">uniform</span><span class="p">,</span> <span class="n">choice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">0.4059007502204043</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">choice</span><span class="p">([</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">])</span>
<span class="go">42</span>
</pre></div>
</div>
<p>In this case the <code class="docutils literal notranslate"><span class="pre">uniform</span></code> and <code class="docutils literal notranslate"><span class="pre">choice</span></code> names are available <em>directly</em>, <em>i.e.</em>
without using the <code class="docutils literal notranslate"><span class="pre">random</span></code> prefix. All other functions in the <code class="docutils literal notranslate"><span class="pre">random</span></code> module
are not available in this case. For the record, the <code class="docutils literal notranslate"><span class="pre">choice</span></code> function returns a
random element from a given collection.</p>
<p>Another option is to import <em>all</em> functions of a certain module and make them
available without a prefix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">-1.639334770284028</span>
</pre></div>
</div>
<p>This is not that recommended as you generally do not know what is the extent
of what you are importing and you might end up with name clashes between your
current code and the imported module, as it will all be in the same namespace,
meaning directly available with no need for a <code class="docutils literal notranslate"><span class="pre">.&lt;name&gt;</span></code> syntax.</p>
<p>Lastly, it is possible to import modules, or specific names from a module,
under an alias.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">uniform</span> <span class="k">as</span> <span class="n">uni</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uni</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">0.7288973406605329</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="go">np.arccos(1)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>This option is useful when you need to assign shorter aliases to names you will
use frequently. In particular, the alias <code class="docutils literal notranslate"><span class="pre">np</span></code> for the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> module will be
encountered a lot.</p>
<p>Note that modules can have submodules, specified with extra dots <code class="docutils literal notranslate"><span class="pre">.</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
<span class="go">&#39;/afs/cern.ch/user/d&#39;</span>
</pre></div>
</div>
<p>When importing a module, its <strong>submodules are not available by default and you
must import them explicitly</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="go">&#39;/afs/cern.ch/user/d/dberzano&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
<span class="go">&#39;dberzano&#39;</span>
</pre></div>
</div>
<p>Note that due to the current Python implementation of the <code class="docutils literal notranslate"><span class="pre">os</span></code> module, <code class="docutils literal notranslate"><span class="pre">os.path</span></code>
functions are <em>actually</em> available <em>even without importing <code class="docutils literal notranslate"><span class="pre">os.path</span></code>. But just
<code class="docutils literal notranslate"><span class="pre">os</span></code></em>. You cannot and should not rely on this implementation, which represents an exception
and might change in the future. Always import submodules explicitly!</p>
<p>It is also possible to import several modules with a single import command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">math</span>
</pre></div>
</div>
<p>but this is <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#imports">not recommended by the Python style guide</a>, which
suggests to use several import statements, one per module, as it improves
readability:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
</pre></div>
</div>
<p>If you need to import several names from a single module, you can split an import
function over multiple lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">exp</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">log</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">e</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">floor</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">floor</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
<span class="go">2.0</span>
</pre></div>
</div>
</div>
<div class="section" id="the-standard-library">
<h2>The standard library<a class="headerlink" href="#the-standard-library" title="Permalink to this headline">¶</a></h2>
<p>The set of things that Python comes with, from all of the types of objects to
all of the different modules, is called the <a class="reference external" href="https://docs.python.org/2/library/index.html">standard library</a>. It is
recommended to browse through the standard library documentation to see what is
available: Python is rich of standard modules, and you should reuse them as much
as possible instead of rewriting code on your own.</p>
<p>Some of the categories for which standard modules are available are:</p>
<ul class="simple">
<li><p>processing paths</p></li>
<li><p>date and time manipulation</p></li>
<li><p>mathematical functions</p></li>
<li><p>parsing of certain file formats</p></li>
<li><p>support for multiple processes and threads</p></li>
<li><p>…</p></li>
</ul>
<p>Use standard Python library modules with confidence: being part of any standard
Python distribution, your code will be easily portable.</p>
</div>
<div class="section" id="modules-from-pypi">
<h2>Modules from PyPi<a class="headerlink" href="#modules-from-pypi" title="Permalink to this headline">¶</a></h2>
<p>Many external modules can be found on <a class="reference external" href="https://pypi.org/">PyPi</a>, the Python Package Index repository.
Some of those modules are
already part of some Python distributions (such as <a class="reference external" href="https://www.anaconda.com/distribution/">Anaconda</a>, which
comes with more than a thousand science-oriented modules preinstalled).</p>
<p>If a certain module you need is not available on your distribution you can
easily install it with the <code class="docutils literal notranslate"><span class="pre">pip</span></code> shell command. Since you typically do not have write
access to the standard Python installation’s directories, <code class="docutils literal notranslate"><span class="pre">pip</span></code> allows you to
install modules only for yourself, under your current user’s home directory.
It is recommended to set up in your shell startup script (such as <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>)
the following two lines telling once and for all where to install and search for
Python user modules:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONUSERBASE</span><span class="o">=</span><span class="nv">$HOME</span>/.local
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PYTHONUSERBASE</span>/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
<p>Once you have done that, close your current terminal window and open a new one,
and you will be ready to use <code class="docutils literal notranslate"><span class="pre">pip</span></code>. We will see in a later lesson how to install
the <code class="docutils literal notranslate"><span class="pre">root_pandas</span></code> module with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install --user root_pandas
</pre></div>
</div>
</div>
<div class="section" id="modules-inside-a-virtual-environment">
<h2>Modules inside a virtual environment<a class="headerlink" href="#modules-inside-a-virtual-environment" title="Permalink to this headline">¶</a></h2>
<p>It is however usually preferable and safer to do everything inside a virtual environement.
The latter is like a copy of your current environement. Thus you can modify your virtual
environement (including installing/deleting/updating modules) without affecting your default
environement. If at some point you realize you have broken everything, you can always exit
the virtual environement and go back to the default lxplus one.</p>
<p>To build a virtual environement based on LCG views, you can use <a class="reference external" href="https://gitlab.cern.ch/cburr/lcg_virtualenv/">LCG_virtualenv</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://gitlab.cern.ch/cburr/lcg_virtualenv.git
./lcg_virtualenv/create_lcg_virtualenv myVenv
</pre></div>
</div>
<p>To activate the virtual environement do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> myVenv/bin/activate
</pre></div>
</div>
<p>You can then install stuff with <code class="docutils literal notranslate"><span class="pre">pip</span></code>, like for instance <code class="docutils literal notranslate"><span class="pre">root_pandas</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install --upgrade root_pandas matplotlib
python -c <span class="s1">&#39;import pandas; print(f&quot;Got pandas from {pandas.__file__}&quot;)&#39;</span>
python -c <span class="s1">&#39;import root_pandas; print(f&quot;Got root_pandas from {root_pandas.__file__}&quot;)&#39;</span>
python -c <span class="s1">&#39;import matplotlib; print(f&quot;Got matplotlib from {matplotlib.__file__}&quot;)&#39;</span>
</pre></div>
</div>
<p>You can go back to the default environement using the <code class="docutils literal notranslate"><span class="pre">deactivate</span></code> command.</p>
</div>
<div class="section" id="write-your-first-python-module">
<h2>Write your first Python module<a class="headerlink" href="#write-your-first-python-module" title="Permalink to this headline">¶</a></h2>
<p>The simplest Python module you can write is just a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file with some
functions inside:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># myfirstmodule.py</span>

<span class="k">def</span> <span class="nf">one</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;this is my first function&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">two</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;this is my second function&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can now fire an <code class="docutils literal notranslate"><span class="pre">ipython</span></code> shell and use those functions right away:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">myfirstmodule</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myfirstmodule</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="go">this is my first function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myfirstmodule</span><span class="o">.</span><span class="n">two</span><span class="p">()</span>
<span class="go">this is my second function</span>
</pre></div>
</div>
<p>By simply calling the file <code class="docutils literal notranslate"><span class="pre">myfirstmodule.py</span></code> we have made it available as a
module named <code class="docutils literal notranslate"><span class="pre">myfirstmodule</span></code> - given that the file is in the same directory
where we have launched the Python interpreter.</p>
<div class="panel panel-callout docutils container">
<div class="panel-header open docutils container">
<p id="module-name-restrictions"><i class="fa fa-info-circle"></i> Module name restrictions</p>
</div>
<div class="panel-body docutils container">
<p>Note that you cannot pick any name you want for a module! From the
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#package-and-module-names">Python style guide</a>, we gather that we should use “short,
all-lowercase names”. As a matter of fact, if we used dashes in the file name,
we would have ended up with a syntax error while trying to load it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">my</span><span class="o">-</span><span class="n">first</span><span class="o">-</span><span class="n">module</span>
  File <span class="nb">&quot;&lt;ipython-input-1-ef292d9e19fe&gt;&quot;</span>, line <span class="m">1</span>
    <span class="kn">import</span> <span class="nn">my</span><span class="o">-</span><span class="n">first</span><span class="o">-</span><span class="n">module</span>
             <span class="o">^</span>
<span class="gr">SyntaxError</span>: <span class="n">invalid syntax</span>
</pre></div>
</div>
<p>Python treats <code class="docutils literal notranslate"><span class="pre">-</span></code> as a minus and does not understand your intentions.</p>
</div>
</div>
</div>
<div class="section" id="write-a-structured-module">
<h2>Write a structured module<a class="headerlink" href="#write-a-structured-module" title="Permalink to this headline">¶</a></h2>
<p>Let’s now create a more structured module, with submodules and different files.
We can start from the <code class="docutils literal notranslate"><span class="pre">myfirstmodule.py</span></code> file and create a directory structure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir yabba
$ cp myfirstmodule.py yabba/__init__.py
</pre></div>
</div>
<p>We have reused the same file created before, copied it into a directory called
<code class="docutils literal notranslate"><span class="pre">yabba</span></code> and renamed it to <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>. The double underscore should ring a
bell: this is a Python special name, and it represents the “main file” within
a module, whereas the directory name now represents the module name.</p>
<p>This means that our module is called <code class="docutils literal notranslate"><span class="pre">yabba</span></code>, and if we import it, functions
from <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> will be available:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">yabba</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">yabba</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="go">this is my first function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">yabba</span><span class="o">.</span><span class="n">two</span><span class="p">()</span>
<span class="go">this is my second function</span>
</pre></div>
</div>
<p>We can create an additional file inside the <code class="docutils literal notranslate"><span class="pre">yabba</span></code> directory, say
<code class="docutils literal notranslate"><span class="pre">yabba/extra.py</span></code> and have more functions there:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># yabba/extra.py</span>

<span class="k">def</span> <span class="nf">three</span><span class="p">():</span>
  <span class="k">print</span> <span class="s1">&#39;this function will return the number three&#39;</span>
  <span class="k">return</span> <span class="mi">3</span>
</pre></div>
</div>
<p>We have effectively made <code class="docutils literal notranslate"><span class="pre">extra</span></code> a submodule of <code class="docutils literal notranslate"><span class="pre">yabba</span></code>. Let’s try:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">yabba</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">),</span> <span class="nb">dir</span><span class="p">(</span><span class="n">yabba</span><span class="p">))</span>
<span class="go">[&#39;one&#39;, &#39;two&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">yabba.extra</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">yabba</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">three</span><span class="p">()</span>
<span class="go">yabba.extra.three()</span>
<span class="go">this function will return the number three</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="panel panel-challenge docutils container">
<div class="panel-header open docutils container">
<p id="what-have-i-done-with-the-filter-function?"><i class="fa fa-square-o"></i> What have I done with the filter function?</p>
</div>
<div class="panel-body docutils container">
<p>We have used the filter function above to list the functions we have defined
in our module. Can you describe in detail what the commands above do?
{% solution “Solution” %}</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dir(module)</span></code> command lists all <em>names</em> (not necessarily functions, not
necessarily defined by us) contained in a given imported module. We have used the
<code class="docutils literal notranslate"><span class="pre">filter()</span></code> command to filter out all names starting with two underscores. Every
item returned by <code class="docutils literal notranslate"><span class="pre">dir()</span></code> is passed as <code class="docutils literal notranslate"><span class="pre">x</span></code> to the lambda function which returns
<code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>, determining whether the <code class="docutils literal notranslate"><span class="pre">filter()</span></code> function should keep or
discard the current element.</p>
<p>{% endsolution %}</p>
</div>
</div>
</div>
<div class="section" id="run-a-module">
<h2>Run a module<a class="headerlink" href="#run-a-module" title="Permalink to this headline">¶</a></h2>
<p>We can make a Python module that can be easily imported by other Python
programs, but we can also make it in a way that it can be run directly as a
Python script.</p>
<p>Let’s write this special module and call it <code class="docutils literal notranslate"><span class="pre">runnable.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="n">long_format</span> <span class="o">=</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">print_label</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">long_format</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;{0}: {1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;{0}-{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
    <span class="k">print</span> <span class="n">out</span>

<span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="n">print_label</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="n">print_label</span><span class="p">(</span><span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;*** Testing print functions ***&#39;</span>
    <span class="n">debug</span><span class="p">(</span><span class="s1">&#39;This is a debug message&#39;</span><span class="p">)</span>
    <span class="n">long_format</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">warning</span><span class="p">(</span><span class="s1">&#39;This is a warning message with a long label&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Module {0} is being imported&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>Now let’s make it executable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ chmod +x runnable.py
</pre></div>
</div>
<p>It can be now run as a normal executable from your shell:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./runnable.py
*** Testing print functions ***
D-This is a debug message
WARNING: This is a warning message with a long label
</pre></div>
</div>
<p>There are two outstanding notions here. First off, the first line is a
“shebang”: it really has to be the <em>first</em> line in a file (it cannot be the
second, or “one of the first”, or the first non-empty) and it basically tells
your shell that your executable text file has to be interpreted by the current
Python interpreter. Just use this line as it is.</p>
<p>Secondly, we notice we have a peculiar <code class="docutils literal notranslate"><span class="pre">if</span></code> condition with a block that gets
executed when we run the file. <code class="docutils literal notranslate"><span class="pre">__name__</span></code> is a special internal Python variable
which is set to the module name in case the module is imported. When the module
is ran, it is set to the special value <code class="docutils literal notranslate"><span class="pre">&quot;__main__&quot;</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">else:</span></code> condition we have added is just to show what happens when you import
the module instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">runnable</span>
<span class="go">Module runnable is being imported</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">runnable</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;hey I can use it from here too&#39;</span><span class="p">)</span>
<span class="go">W-hey I can use it from here too</span>
</pre></div>
</div>
<p>Now, the <code class="docutils literal notranslate"><span class="pre">if</span></code> condition is not necessary when you want to run the module - those
lines in the <code class="docutils literal notranslate"><span class="pre">if</span></code> block will be executed anyway. It is however used to <em>prevent</em>
some lines from being executed when you import the file as a module.</p>
<p>Please also note that module imports are typically <em>silent</em>, so the <code class="docutils literal notranslate"><span class="pre">else:</span></code>
condition with a printout would not exist in real life.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="learning.html" class="btn btn-neutral float-right" title="Learning more" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="scripting.html" class="btn btn-neutral float-left" title="Scripting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright HSF [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/legalcode) - Originally based on [swcarpentry](https://github.com/swcarpentry/) © 2016–2017 Software Carpentry Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    Hello world


</body>
</html>